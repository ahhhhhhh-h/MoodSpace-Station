{"ast":null,"code":"var _jsxFileName = \"/Users/zyq/Desktop/\\u5927\\u4E8C\\u4E0B/\\u6691\\u671F\\u5B9E\\u4E60/moonshot project/src/components/Moon.tsx\",\n  _s = $RefreshSig$();\n// src/components/Moon.tsx\nimport React, { useState, useEffect } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { moonImage, starIcon, meteorIcon, flower1Icon, flower2Icon, flower3Icon } from '../assets';\n\n// 旋转动画\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst rotate = keyframes`\n  from { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n`;\n\n// 浮动动画\nconst float = keyframes`\n  0%   { transform: translateY(0); }\n  50%  { transform: translateY(-10px); }\n  100% { transform: translateY(0); }\n`;\nconst MoonContainer = styled.div`\n  position: absolute;\n  top: 50%; left: 50%;\n  transform: translate(-50%, -50%);\n  width: 300px; height: 300px;\n  z-index: 1;\n`;\n_c = MoonContainer;\nconst MoonSphere = styled.div`\n  width: 100%; height: 100%;\n  border-radius: 50%;\n  background: url(${moonImage}) no-repeat center center;\n  background-size: cover;\n  animation: ${rotate} 60s linear infinite;\n  box-shadow: inset -25px -25px 40px rgba(0,0,0,0.3);\n`;\n_c2 = MoonSphere;\nconst CelestialBodyContainer = styled.div`\n  position: absolute;\n  left: ${p => p.x}px; top: ${p => p.y}px;\n  width: 48px; height: 48px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ${p => p.type === 'positive' ? `url(${starIcon})` : p.type === 'negative' ? `url(${meteorIcon})` : `url(${starIcon})`};\n  animation: ${float} 6s ease-in-out infinite;\n  cursor: pointer;\n  filter: ${p => p.type === 'received' ? 'hue-rotate(90deg)' : 'none'};\n  &:hover {\n    transform: scale(1.2);\n    filter: brightness(1.2) ${p => p.type === 'received' ? 'hue-rotate(90deg)' : ''};\n    z-index: 10;\n  }\n`;\n\n// 花朵容器，将 style → flowerType 避免和 React style 冲突\n_c3 = CelestialBodyContainer;\nconst FlowerContainer = styled.div`\n  position: absolute;\n  left: ${p => p.x}px; top: ${p => p.y}px;\n  width: 32px; height: 32px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ${p => p.flowerType === 'flower1' ? `url(${flower1Icon})` : p.flowerType === 'flower2' ? `url(${flower2Icon})` : `url(${flower3Icon})`};\n`;\n_c4 = FlowerContainer;\nconst Tooltip = styled.div`\n  position: absolute;\n  background: rgba(0,0,0,0.8);\n  color: #fff;\n  padding: 6px 10px;\n  border-radius: 4px;\n  font-size: 12px;\n  max-width: 180px;\n  pointer-events: none;\n  opacity: 0; transition: opacity 0.2s;\n  ${CelestialBodyContainer}:hover & { opacity: 1; }\n`;\n_c5 = Tooltip;\nexport const Moon = ({\n  celestialBodies,\n  flowers = []\n}) => {\n  _s();\n  const [positions, setPositions] = useState({});\n  useEffect(() => {\n    const w = document.documentElement.clientWidth;\n    const h = document.documentElement.clientHeight;\n    const moonX = w / 2,\n      moonY = h / 2,\n      moonR = 150;\n    const margin = 50,\n      topGap = 100,\n      bottomGap = 150;\n    const minX = margin,\n      maxX = w - 48 - margin;\n    const minY = topGap + margin,\n      maxY = h - bottomGap - margin;\n    const newPos = {};\n    celestialBodies.forEach(body => {\n      if (positions[body.id]) {\n        newPos[body.id] = positions[body.id];\n      } else {\n        let x,\n          y,\n          cnt = 0;\n        do {\n          x = Math.random() * (maxX - minX) + minX;\n          y = Math.random() * (maxY - minY) + minY;\n          cnt++;\n        } while (cnt < 100 && Math.hypot(x - moonX, y - moonY) < moonR + 60);\n        newPos[body.id] = {\n          x,\n          y\n        };\n      }\n    });\n    setPositions(newPos);\n  }, [celestialBodies]);\n  return /*#__PURE__*/_jsxDEV(MoonContainer, {\n    children: [/*#__PURE__*/_jsxDEV(MoonSphere, {\n      children: flowers.map(f => /*#__PURE__*/_jsxDEV(FlowerContainer, {\n        x: f.position.x,\n        y: f.position.y,\n        flowerType: f.style\n      }, f.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this), celestialBodies.map(body => {\n      var _positions$body$id, _positions$body$id2;\n      return /*#__PURE__*/_jsxDEV(CelestialBodyContainer, {\n        x: ((_positions$body$id = positions[body.id]) === null || _positions$body$id === void 0 ? void 0 : _positions$body$id.x) || 0,\n        y: ((_positions$body$id2 = positions[body.id]) === null || _positions$body$id2 === void 0 ? void 0 : _positions$body$id2.y) || 0,\n        type: body.type,\n        children: /*#__PURE__*/_jsxDEV(Tooltip, {\n          children: body.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)\n      }, body.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n};\n_s(Moon, \"/AissEqk0gq+Jf1Qguftgq+piws=\");\n_c6 = Moon;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"MoonContainer\");\n$RefreshReg$(_c2, \"MoonSphere\");\n$RefreshReg$(_c3, \"CelestialBodyContainer\");\n$RefreshReg$(_c4, \"FlowerContainer\");\n$RefreshReg$(_c5, \"Tooltip\");\n$RefreshReg$(_c6, \"Moon\");","map":{"version":3,"names":["React","useState","useEffect","styled","keyframes","moonImage","starIcon","meteorIcon","flower1Icon","flower2Icon","flower3Icon","jsxDEV","_jsxDEV","rotate","float","MoonContainer","div","_c","MoonSphere","_c2","CelestialBodyContainer","p","x","y","type","_c3","FlowerContainer","flowerType","_c4","Tooltip","_c5","Moon","celestialBodies","flowers","_s","positions","setPositions","w","document","documentElement","clientWidth","h","clientHeight","moonX","moonY","moonR","margin","topGap","bottomGap","minX","maxX","minY","maxY","newPos","forEach","body","id","cnt","Math","random","hypot","children","map","f","position","style","fileName","_jsxFileName","lineNumber","columnNumber","_positions$body$id","_positions$body$id2","content","_c6","$RefreshReg$"],"sources":["/Users/zyq/Desktop/大二下/暑期实习/moonshot project/src/components/Moon.tsx"],"sourcesContent":["// src/components/Moon.tsx\nimport React, { useState, useEffect } from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport { CelestialBody, Flower, EmotionType } from '../types';\nimport {\n  moonImage,\n  starIcon,\n  meteorIcon,\n  flower1Icon,\n  flower2Icon,\n  flower3Icon\n} from '../assets';\n\n// 旋转动画\nconst rotate = keyframes`\n  from { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n`;\n\n// 浮动动画\nconst float = keyframes`\n  0%   { transform: translateY(0); }\n  50%  { transform: translateY(-10px); }\n  100% { transform: translateY(0); }\n`;\n\nconst MoonContainer = styled.div`\n  position: absolute;\n  top: 50%; left: 50%;\n  transform: translate(-50%, -50%);\n  width: 300px; height: 300px;\n  z-index: 1;\n`;\n\nconst MoonSphere = styled.div`\n  width: 100%; height: 100%;\n  border-radius: 50%;\n  background: url(${moonImage}) no-repeat center center;\n  background-size: cover;\n  animation: ${rotate} 60s linear infinite;\n  box-shadow: inset -25px -25px 40px rgba(0,0,0,0.3);\n`;\n\nconst CelestialBodyContainer = styled.div<{ x: number; y: number; type: EmotionType }>`\n  position: absolute;\n  left: ${p => p.x}px; top: ${p => p.y}px;\n  width: 48px; height: 48px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ${p =>\n    p.type === 'positive' ? `url(${starIcon})`\n    : p.type === 'negative' ? `url(${meteorIcon})`\n    : `url(${starIcon})`};\n  animation: ${float} 6s ease-in-out infinite;\n  cursor: pointer;\n  filter: ${p => p.type === 'received' ? 'hue-rotate(90deg)' : 'none'};\n  &:hover {\n    transform: scale(1.2);\n    filter: brightness(1.2) ${p => p.type === 'received' ? 'hue-rotate(90deg)' : ''};\n    z-index: 10;\n  }\n`;\n\n// 花朵容器，将 style → flowerType 避免和 React style 冲突\nconst FlowerContainer = styled.div<{\n  x: number;\n  y: number;\n  flowerType: 'flower1' | 'flower2' | 'flower3';\n}>`\n  position: absolute;\n  left: ${p => p.x}px; top: ${p => p.y}px;\n  width: 32px; height: 32px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ${p => \n    p.flowerType === 'flower1' ? `url(${flower1Icon})`\n    : p.flowerType === 'flower2' ? `url(${flower2Icon})`\n    : `url(${flower3Icon})`\n  };\n`;\n\nconst Tooltip = styled.div`\n  position: absolute;\n  background: rgba(0,0,0,0.8);\n  color: #fff;\n  padding: 6px 10px;\n  border-radius: 4px;\n  font-size: 12px;\n  max-width: 180px;\n  pointer-events: none;\n  opacity: 0; transition: opacity 0.2s;\n  ${CelestialBodyContainer}:hover & { opacity: 1; }\n`;\n\ninterface MoonProps {\n  celestialBodies: CelestialBody[];\n  flowers?: Flower[];\n}\n\nexport const Moon: React.FC<MoonProps> = ({ celestialBodies, flowers = [] }) => {\n  const [positions, setPositions] = useState<Record<string,{x:number,y:number}>>({});\n\n  useEffect(() => {\n    const w = document.documentElement.clientWidth;\n    const h = document.documentElement.clientHeight;\n    const moonX = w/2, moonY = h/2, moonR = 150;\n    const margin = 50, topGap = 100, bottomGap = 150;\n    const minX = margin, maxX = w - 48 - margin;\n    const minY = topGap + margin, maxY = h - bottomGap - margin;\n\n    const newPos: typeof positions = {};\n    celestialBodies.forEach(body => {\n      if (positions[body.id]) {\n        newPos[body.id] = positions[body.id];\n      } else {\n        let x:number, y:number, cnt=0;\n        do {\n          x = Math.random()*(maxX-minX)+minX;\n          y = Math.random()*(maxY-minY)+minY;\n          cnt++;\n        } while (\n          cnt<100 &&\n          Math.hypot(x-moonX, y-moonY) < (moonR+60)\n        );\n        newPos[body.id] = { x, y };\n      }\n    });\n    setPositions(newPos);\n  }, [celestialBodies]);\n\n  return (\n    <MoonContainer>\n      <MoonSphere>\n        {flowers.map(f => (\n          <FlowerContainer\n            key={f.id}\n            x={f.position.x}\n            y={f.position.y}\n            flowerType={f.style as 'flower1'|'flower2'|'flower3'}\n          />\n        ))}\n      </MoonSphere>\n      {celestialBodies.map(body => (\n        <CelestialBodyContainer\n          key={body.id}\n          x={positions[body.id]?.x||0}\n          y={positions[body.id]?.y||0}\n          type={body.type}\n        >\n          <Tooltip>{body.content}</Tooltip>\n        </CelestialBodyContainer>\n      ))}\n    </MoonContainer>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}