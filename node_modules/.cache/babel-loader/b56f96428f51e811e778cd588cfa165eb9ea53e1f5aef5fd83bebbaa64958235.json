{"ast":null,"code":"/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nclass Lookup {\n  constructor(data, propName = 'input') {\n    this.dict = {};\n    this.items = [];\n    if (data) {\n      this.buildFromData(data, propName);\n    }\n  }\n  add(key) {\n    if (this.dict[key] === undefined) {\n      this.dict[key] = this.items.length;\n      this.items.push(key);\n    }\n  }\n  buildFromData(data, propName) {\n    for (let i = 0; i < data.length; i += 1) {\n      const item = data[i][propName];\n      const keys = Object.keys(item);\n      for (let j = 0; j < keys.length; j += 1) {\n        this.add(keys[j]);\n      }\n    }\n  }\n  prepare(item) {\n    const keys = Object.keys(item);\n    const resultKeys = [];\n    const resultData = {};\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      if (this.dict[key] !== undefined) {\n        resultKeys.push(this.dict[key]);\n        resultData[this.dict[key]] = item[key];\n      }\n    }\n    return {\n      keys: resultKeys,\n      data: resultData\n    };\n  }\n}\nmodule.exports = Lookup;","map":{"version":3,"names":["Lookup","constructor","data","propName","dict","items","buildFromData","add","key","undefined","length","push","i","item","keys","Object","j","prepare","resultKeys","resultData","module","exports"],"sources":["/Users/zyq/Desktop/大二下/暑期实习/moonshot project/node_modules/@nlpjs/neural/src/lookup.js"],"sourcesContent":["/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nclass Lookup {\n  constructor(data, propName = 'input') {\n    this.dict = {};\n    this.items = [];\n    if (data) {\n      this.buildFromData(data, propName);\n    }\n  }\n\n  add(key) {\n    if (this.dict[key] === undefined) {\n      this.dict[key] = this.items.length;\n      this.items.push(key);\n    }\n  }\n\n  buildFromData(data, propName) {\n    for (let i = 0; i < data.length; i += 1) {\n      const item = data[i][propName];\n      const keys = Object.keys(item);\n      for (let j = 0; j < keys.length; j += 1) {\n        this.add(keys[j]);\n      }\n    }\n  }\n\n  prepare(item) {\n    const keys = Object.keys(item);\n    const resultKeys = [];\n    const resultData = {};\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      if (this.dict[key] !== undefined) {\n        resultKeys.push(this.dict[key]);\n        resultData[this.dict[key]] = item[key];\n      }\n    }\n    return {\n      keys: resultKeys,\n      data: resultData,\n    };\n  }\n}\n\nmodule.exports = Lookup;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,MAAM,CAAC;EACXC,WAAWA,CAACC,IAAI,EAAEC,QAAQ,GAAG,OAAO,EAAE;IACpC,IAAI,CAACC,IAAI,GAAG,CAAC,CAAC;IACd,IAAI,CAACC,KAAK,GAAG,EAAE;IACf,IAAIH,IAAI,EAAE;MACR,IAAI,CAACI,aAAa,CAACJ,IAAI,EAAEC,QAAQ,CAAC;IACpC;EACF;EAEAI,GAAGA,CAACC,GAAG,EAAE;IACP,IAAI,IAAI,CAACJ,IAAI,CAACI,GAAG,CAAC,KAAKC,SAAS,EAAE;MAChC,IAAI,CAACL,IAAI,CAACI,GAAG,CAAC,GAAG,IAAI,CAACH,KAAK,CAACK,MAAM;MAClC,IAAI,CAACL,KAAK,CAACM,IAAI,CAACH,GAAG,CAAC;IACtB;EACF;EAEAF,aAAaA,CAACJ,IAAI,EAAEC,QAAQ,EAAE;IAC5B,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGV,IAAI,CAACQ,MAAM,EAAEE,CAAC,IAAI,CAAC,EAAE;MACvC,MAAMC,IAAI,GAAGX,IAAI,CAACU,CAAC,CAAC,CAACT,QAAQ,CAAC;MAC9B,MAAMW,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACD,IAAI,CAAC;MAC9B,KAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,IAAI,CAACJ,MAAM,EAAEM,CAAC,IAAI,CAAC,EAAE;QACvC,IAAI,CAACT,GAAG,CAACO,IAAI,CAACE,CAAC,CAAC,CAAC;MACnB;IACF;EACF;EAEAC,OAAOA,CAACJ,IAAI,EAAE;IACZ,MAAMC,IAAI,GAAGC,MAAM,CAACD,IAAI,CAACD,IAAI,CAAC;IAC9B,MAAMK,UAAU,GAAG,EAAE;IACrB,MAAMC,UAAU,GAAG,CAAC,CAAC;IACrB,KAAK,IAAIP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,IAAI,CAACJ,MAAM,EAAEE,CAAC,IAAI,CAAC,EAAE;MACvC,MAAMJ,GAAG,GAAGM,IAAI,CAACF,CAAC,CAAC;MACnB,IAAI,IAAI,CAACR,IAAI,CAACI,GAAG,CAAC,KAAKC,SAAS,EAAE;QAChCS,UAAU,CAACP,IAAI,CAAC,IAAI,CAACP,IAAI,CAACI,GAAG,CAAC,CAAC;QAC/BW,UAAU,CAAC,IAAI,CAACf,IAAI,CAACI,GAAG,CAAC,CAAC,GAAGK,IAAI,CAACL,GAAG,CAAC;MACxC;IACF;IACA,OAAO;MACLM,IAAI,EAAEI,UAAU;MAChBhB,IAAI,EAAEiB;IACR,CAAC;EACH;AACF;AAEAC,MAAM,CAACC,OAAO,GAAGrB,MAAM","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}