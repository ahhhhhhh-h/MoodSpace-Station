{"ast":null,"code":"/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst {\n  defaultContainer\n} = require('@nlpjs/core');\nconst reduceEdges = require('./reduce-edges');\nclass ExtractorBuiltin {\n  constructor(container = defaultContainer) {\n    this.container = container.container || container;\n    this.name = 'extract-builtin';\n  }\n  extract(srcInput) {\n    return srcInput;\n  }\n  async run(srcInput) {\n    const input = srcInput;\n    const locale = input.locale || 'en';\n    const extractor = this.container.get(`extract-builtin-${locale}`) || this;\n    const newInput = await extractor.extract({\n      text: input.text || input.utterance,\n      locale: input.locale\n    });\n    input.edges = input.edges || [];\n    if (newInput.edges) {\n      for (let i = 0; i < newInput.edges.length; i += 1) {\n        if (!input.nerLimitToEntities || input.intentEntities.includes(newInput.edges[i].entity)) {\n          input.edges.push(newInput.edges[i]);\n        }\n      }\n    }\n    input.edges = reduceEdges(input.edges, false);\n    input.sourceEntities = input.sourceEntities || [];\n    if (newInput.sourceEntities) {\n      for (let i = 0; i < newInput.sourceEntities.length; i += 1) {\n        input.sourceEntities.push(newInput.sourceEntities[i]);\n      }\n    }\n    return input;\n  }\n}\nmodule.exports = ExtractorBuiltin;","map":{"version":3,"names":["defaultContainer","require","reduceEdges","ExtractorBuiltin","constructor","container","name","extract","srcInput","run","input","locale","extractor","get","newInput","text","utterance","edges","i","length","nerLimitToEntities","intentEntities","includes","entity","push","sourceEntities","module","exports"],"sources":["/Users/zyq/Desktop/大二下/暑期实习/moonshot project/node_modules/@nlpjs/ner/src/extractor-builtin.js"],"sourcesContent":["/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst { defaultContainer } = require('@nlpjs/core');\nconst reduceEdges = require('./reduce-edges');\n\nclass ExtractorBuiltin {\n  constructor(container = defaultContainer) {\n    this.container = container.container || container;\n    this.name = 'extract-builtin';\n  }\n\n  extract(srcInput) {\n    return srcInput;\n  }\n\n  async run(srcInput) {\n    const input = srcInput;\n    const locale = input.locale || 'en';\n    const extractor = this.container.get(`extract-builtin-${locale}`) || this;\n    const newInput = await extractor.extract({\n      text: input.text || input.utterance,\n      locale: input.locale,\n    });\n    input.edges = input.edges || [];\n    if (newInput.edges) {\n      for (let i = 0; i < newInput.edges.length; i += 1) {\n        if (\n          !input.nerLimitToEntities ||\n          input.intentEntities.includes(newInput.edges[i].entity)\n        ) {\n          input.edges.push(newInput.edges[i]);\n        }\n      }\n    }\n    input.edges = reduceEdges(input.edges, false);\n    input.sourceEntities = input.sourceEntities || [];\n    if (newInput.sourceEntities) {\n      for (let i = 0; i < newInput.sourceEntities.length; i += 1) {\n        input.sourceEntities.push(newInput.sourceEntities[i]);\n      }\n    }\n    return input;\n  }\n}\n\nmodule.exports = ExtractorBuiltin;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAiB,CAAC,GAAGC,OAAO,CAAC,aAAa,CAAC;AACnD,MAAMC,WAAW,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AAE7C,MAAME,gBAAgB,CAAC;EACrBC,WAAWA,CAACC,SAAS,GAAGL,gBAAgB,EAAE;IACxC,IAAI,CAACK,SAAS,GAAGA,SAAS,CAACA,SAAS,IAAIA,SAAS;IACjD,IAAI,CAACC,IAAI,GAAG,iBAAiB;EAC/B;EAEAC,OAAOA,CAACC,QAAQ,EAAE;IAChB,OAAOA,QAAQ;EACjB;EAEA,MAAMC,GAAGA,CAACD,QAAQ,EAAE;IAClB,MAAME,KAAK,GAAGF,QAAQ;IACtB,MAAMG,MAAM,GAAGD,KAAK,CAACC,MAAM,IAAI,IAAI;IACnC,MAAMC,SAAS,GAAG,IAAI,CAACP,SAAS,CAACQ,GAAG,CAAC,mBAAmBF,MAAM,EAAE,CAAC,IAAI,IAAI;IACzE,MAAMG,QAAQ,GAAG,MAAMF,SAAS,CAACL,OAAO,CAAC;MACvCQ,IAAI,EAAEL,KAAK,CAACK,IAAI,IAAIL,KAAK,CAACM,SAAS;MACnCL,MAAM,EAAED,KAAK,CAACC;IAChB,CAAC,CAAC;IACFD,KAAK,CAACO,KAAK,GAAGP,KAAK,CAACO,KAAK,IAAI,EAAE;IAC/B,IAAIH,QAAQ,CAACG,KAAK,EAAE;MAClB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,QAAQ,CAACG,KAAK,CAACE,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QACjD,IACE,CAACR,KAAK,CAACU,kBAAkB,IACzBV,KAAK,CAACW,cAAc,CAACC,QAAQ,CAACR,QAAQ,CAACG,KAAK,CAACC,CAAC,CAAC,CAACK,MAAM,CAAC,EACvD;UACAb,KAAK,CAACO,KAAK,CAACO,IAAI,CAACV,QAAQ,CAACG,KAAK,CAACC,CAAC,CAAC,CAAC;QACrC;MACF;IACF;IACAR,KAAK,CAACO,KAAK,GAAGf,WAAW,CAACQ,KAAK,CAACO,KAAK,EAAE,KAAK,CAAC;IAC7CP,KAAK,CAACe,cAAc,GAAGf,KAAK,CAACe,cAAc,IAAI,EAAE;IACjD,IAAIX,QAAQ,CAACW,cAAc,EAAE;MAC3B,KAAK,IAAIP,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,QAAQ,CAACW,cAAc,CAACN,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAC1DR,KAAK,CAACe,cAAc,CAACD,IAAI,CAACV,QAAQ,CAACW,cAAc,CAACP,CAAC,CAAC,CAAC;MACvD;IACF;IACA,OAAOR,KAAK;EACd;AACF;AAEAgB,MAAM,CAACC,OAAO,GAAGxB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}