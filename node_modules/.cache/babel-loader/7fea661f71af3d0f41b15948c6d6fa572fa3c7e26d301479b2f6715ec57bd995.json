{"ast":null,"code":"var _EmotionAnalyzer;\nimport { SentimentAnalyzer } from 'node-nlp';\nexport class EmotionAnalyzer {\n  constructor() {\n    this.analyzer = void 0;\n    this.lastAnalysis = null;\n    this.analysisHistory = [];\n    this.analyzer = new SentimentAnalyzer({\n      language: 'zh'\n      // ÂèØÈÄâÁöÑÈÖçÁΩÆÂèÇÊï∞\n      // stemmer: true,        // ËØçÂπ≤ÊèêÂèñ\n      // tokenizer: true,      // ÂàÜËØç\n    });\n\n    // Ê∑ªÂä†Ëá™ÂÆö‰πâËØçÂÖ∏\n    this.initializeCustomDictionary();\n  }\n  static getInstance() {\n    if (!EmotionAnalyzer.instance) {\n      EmotionAnalyzer.instance = new EmotionAnalyzer();\n    }\n    return EmotionAnalyzer.instance;\n  }\n  initializeCustomDictionary() {\n    // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†Ëá™ÂÆö‰πâÁöÑÊÉÖÊÑüËØçÂÖ∏\n    // Ê≥®ÊÑèÔºönode-nlp ÁöÑ addWord ÊñπÊ≥ïÂèØËÉΩÂú®Êüê‰∫õÁâàÊú¨‰∏≠‰∏çÂèØÁî®\n    try {\n      // @ts-ignore\n      if (typeof this.analyzer.addWord === 'function') {\n        // Ê∑ªÂä†ÁßØÊûÅÊÉÖÊÑüËØç\n        [{\n          word: 'ÂºÄÂøÉ',\n          score: 2\n        }, {\n          word: 'Âø´‰πê',\n          score: 2\n        }, {\n          word: 'È´òÂÖ¥',\n          score: 2\n        }, {\n          word: 'ÂñúÊ¨¢',\n          score: 1.5\n        }, {\n          word: 'Áà±',\n          score: 2\n        }, {\n          word: 'Ê£í',\n          score: 1.5\n        }, {\n          word: 'Â•Ω',\n          score: 1\n        }, {\n          word: '‰ºòÁßÄ',\n          score: 1.5\n        }, {\n          word: 'ÊÑüÊÅ©',\n          score: 1.5\n        }, {\n          word: 'Â∏åÊúõ',\n          score: 1\n        }, {\n          word: 'Âä†Ê≤π',\n          score: 1.5\n        }, {\n          word: 'ÁæéÂ•Ω',\n          score: 1.5\n        }, {\n          word: 'Ê∏©Êöñ',\n          score: 1.5\n        }].forEach(({\n          word,\n          score\n        }) => {\n          // @ts-ignore\n          this.analyzer.addWord(word, score);\n        });\n\n        // Ê∑ªÂä†Ê∂àÊûÅÊÉÖÊÑüËØç\n        [{\n          word: 'ÈöæËøá',\n          score: -2\n        }, {\n          word: '‰º§ÂøÉ',\n          score: -2\n        }, {\n          word: 'ÁóõËã¶',\n          score: -2\n        }, {\n          word: 'ËÆ®Âéå',\n          score: -1.5\n        }, {\n          word: 'ÁÉ¶',\n          score: -1.5\n        }, {\n          word: 'Á≥üÁ≥ï',\n          score: -1.5\n        }, {\n          word: 'Â§±Êúõ',\n          score: -1.5\n        }, {\n          word: 'ÁÑ¶Ëôë',\n          score: -1.5\n        }, {\n          word: 'ÁîüÊ∞î',\n          score: -1.5\n        }, {\n          word: 'Áñ≤ÊÉ´',\n          score: -1\n        }, {\n          word: 'Â≠§Áã¨',\n          score: -1.5\n        }, {\n          word: 'ÂéãÂäõ',\n          score: -1\n        }, {\n          word: 'ÊãÖÂøÉ',\n          score: -1\n        }].forEach(({\n          word,\n          score\n        }) => {\n          // @ts-ignore\n          this.analyzer.addWord(word, score);\n        });\n      }\n    } catch (error) {\n      console.warn('Ê∑ªÂä†Ëá™ÂÆö‰πâËØçÂÖ∏Â§±Ë¥•ÔºåÂ∞Ü‰ΩøÁî®ÈªòËÆ§ËØçÂÖ∏', error);\n    }\n  }\n  adjustScoreBasedOnContext(text, score) {\n    let adjustedScore = score;\n\n    // 1. Ê£ÄÊü•Ë°®ÊÉÖÁ¨¶Âè∑\n    const positiveEmojis = ['üòä', 'üòÑ', 'üòÉ', 'üòÄ', 'üòÅ', 'üòÜ', 'üòÖ', 'üòÇ', 'ü§£', '‚ù§Ô∏è', 'ü•∞', '‚ú®'];\n    const negativeEmojis = ['üò¢', 'üò≠', 'üòû', 'üòî', 'üòü', 'üòï', 'üò£', 'üòñ', 'üò´', 'üò©', 'üò±', 'üò®'];\n    positiveEmojis.forEach(emoji => {\n      if (text.includes(emoji)) adjustedScore += 0.2;\n    });\n    negativeEmojis.forEach(emoji => {\n      if (text.includes(emoji)) adjustedScore -= 0.2;\n    });\n\n    // 2. Ê£ÄÊü•Ê†áÁÇπÁ¨¶Âè∑\n    const exclamationCount = (text.match(/!|ÔºÅ/g) || []).length;\n    adjustedScore += exclamationCount * 0.1; // ÊÑüÂèπÂè∑ÈÄöÂ∏∏Ë°®Á§∫Âº∫ÁÉàÊÉÖÊÑü\n\n    // 3. Ê£ÄÊü•Á®ãÂ∫¶ËØç\n    const degreeWords = {\n      'ÈùûÂ∏∏': 0.3,\n      'Âæà': 0.2,\n      'ÁâπÂà´': 0.2,\n      'Áúü': 0.2,\n      'Â§™': 0.2,\n      'Â•Ω': 0.1\n    };\n    Object.entries(degreeWords).forEach(([word, value]) => {\n      if (text.includes(word)) {\n        adjustedScore = adjustedScore > 0 ? adjustedScore + value : adjustedScore - value;\n      }\n    });\n\n    // 4. ËÄÉËôëÂéÜÂè≤ÂàÜÊûêÁªìÊûúÔºàÊÉÖÊÑüËøûÁª≠ÊÄßÔºâ\n    if (this.lastAnalysis && this.lastAnalysis.result === 'positive') {\n      adjustedScore += 0.1; // ËΩªÂæÆÂÅèÂêë‰∏ä‰∏ÄÊ¨°ÁöÑÊÉÖÊÑü\n    } else if (this.lastAnalysis && this.lastAnalysis.result === 'negative') {\n      adjustedScore -= 0.1;\n    }\n    return adjustedScore;\n  }\n  async analyzeEmotion(text) {\n    try {\n      const result = await this.analyzer.getSentiment(text);\n\n      // 1. Ëé∑ÂèñÂü∫Á°ÄÂàÜÊï∞\n      let score = result.score;\n\n      // 2. Ê†πÊçÆ‰∏ä‰∏ãÊñáË∞ÉÊï¥ÂàÜÊï∞\n      score = this.adjustScoreBasedOnContext(text, score);\n\n      // 3. Á°ÆÂÆöÊÉÖÊÑüÁ±ªÂûã\n      let emotionType;\n      if (score > 0.15) {\n        // ÊèêÈ´òÁßØÊûÅÊÉÖÊÑüÁöÑÈòàÂÄº\n        emotionType = 'positive';\n      } else if (score < -0.1) {\n        // Èôç‰ΩéÊ∂àÊûÅÊÉÖÊÑüÁöÑÈòàÂÄºÔºå‰ΩøÁ≥ªÁªüÊõ¥ÂÆπÊòìËØÜÂà´Ê∂àÊûÅÊÉÖÊÑü\n        emotionType = 'negative';\n      } else {\n        // ÂØπ‰∫é‰∏≠ÊÄßÊÉÖÊÑüÔºåÊàë‰ª¨Ê†πÊçÆÊõ¥Â§öÁâπÂæÅÊù•Âà§Êñ≠\n        const hasPositiveWords = result.positive.length > 0;\n        const hasNegativeWords = result.negative.length > 0;\n        if (hasPositiveWords && !hasNegativeWords) {\n          emotionType = 'positive';\n        } else if (hasNegativeWords && !hasPositiveWords) {\n          emotionType = 'negative';\n        } else {\n          // Â¶ÇÊûúËøòÊòØÊó†Ê≥ïÂà§Êñ≠Ôºå‰øùÊåÅÁßØÊûÅÂÄæÂêë\n          emotionType = 'positive';\n        }\n      }\n\n      // 4. Êõ¥Êñ∞ÂàÜÊûêÂéÜÂè≤\n      this.lastAnalysis = {\n        text,\n        result: emotionType\n      };\n      this.analysisHistory.push({\n        text,\n        result: emotionType\n      });\n      if (this.analysisHistory.length > 10) {\n        this.analysisHistory.shift(); // ‰øùÊåÅÂéÜÂè≤ËÆ∞ÂΩïÂú®ÂêàÁêÜËåÉÂõ¥ÂÜÖ\n      }\n      return emotionType;\n    } catch (error) {\n      console.error('ÊÉÖÊÑüÂàÜÊûêÂá∫Èîô:', error);\n      // Â¶ÇÊûúÂàÜÊûêÂá∫ÈîôÔºåÊ†πÊçÆÂéÜÂè≤ËÆ∞ÂΩïËøîÂõû‰∏Ä‰∏™ÂèØËÉΩÁöÑÁªìÊûú\n      if (this.lastAnalysis) {\n        return this.lastAnalysis.result;\n      }\n      // Â¶ÇÊûúÊ≤°ÊúâÂéÜÂè≤ËÆ∞ÂΩïÔºåËøîÂõûÁßØÊûÅ\n      return 'positive';\n    }\n  }\n\n  // Áî®‰∫éË∞ÉËØïÂíå‰ºòÂåñÁöÑÊñπÊ≥ï\n  getAnalysisStats() {\n    return {\n      historyLength: this.analysisHistory.length,\n      positiveCount: this.analysisHistory.filter(item => item.result === 'positive').length,\n      negativeCount: this.analysisHistory.filter(item => item.result === 'negative').length,\n      lastAnalysis: this.lastAnalysis\n    };\n  }\n}\n_EmotionAnalyzer = EmotionAnalyzer;\nEmotionAnalyzer.instance = void 0;","map":{"version":3,"names":["SentimentAnalyzer","EmotionAnalyzer","constructor","analyzer","lastAnalysis","analysisHistory","language","initializeCustomDictionary","getInstance","instance","addWord","word","score","forEach","error","console","warn","adjustScoreBasedOnContext","text","adjustedScore","positiveEmojis","negativeEmojis","emoji","includes","exclamationCount","match","length","degreeWords","Object","entries","value","result","analyzeEmotion","getSentiment","emotionType","hasPositiveWords","positive","hasNegativeWords","negative","push","shift","getAnalysisStats","historyLength","positiveCount","filter","item","negativeCount","_EmotionAnalyzer"],"sources":["/Users/zyq/Desktop/Â§ß‰∫å‰∏ã/ÊöëÊúüÂÆû‰π†/moonshot project/src/utils/EmotionAnalyzer.ts"],"sourcesContent":["import { SentimentAnalyzer } from 'node-nlp';\nimport { EmotionType } from '../types';\n\nexport class EmotionAnalyzer {\n  private analyzer: SentimentAnalyzer;\n  private static instance: EmotionAnalyzer;\n  private lastAnalysis: { text: string; result: EmotionType } | null = null;\n  private analysisHistory: Array<{ text: string; result: EmotionType }> = [];\n\n  private constructor() {\n    this.analyzer = new SentimentAnalyzer({ \n      language: 'zh',\n      // ÂèØÈÄâÁöÑÈÖçÁΩÆÂèÇÊï∞\n      // stemmer: true,        // ËØçÂπ≤ÊèêÂèñ\n      // tokenizer: true,      // ÂàÜËØç\n    });\n\n    // Ê∑ªÂä†Ëá™ÂÆö‰πâËØçÂÖ∏\n    this.initializeCustomDictionary();\n  }\n\n  public static getInstance(): EmotionAnalyzer {\n    if (!EmotionAnalyzer.instance) {\n      EmotionAnalyzer.instance = new EmotionAnalyzer();\n    }\n    return EmotionAnalyzer.instance;\n  }\n\n  private initializeCustomDictionary() {\n    // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†Ëá™ÂÆö‰πâÁöÑÊÉÖÊÑüËØçÂÖ∏\n    // Ê≥®ÊÑèÔºönode-nlp ÁöÑ addWord ÊñπÊ≥ïÂèØËÉΩÂú®Êüê‰∫õÁâàÊú¨‰∏≠‰∏çÂèØÁî®\n    try {\n      // @ts-ignore\n      if (typeof this.analyzer.addWord === 'function') {\n        // Ê∑ªÂä†ÁßØÊûÅÊÉÖÊÑüËØç\n        [\n          { word: 'ÂºÄÂøÉ', score: 2 },\n          { word: 'Âø´‰πê', score: 2 },\n          { word: 'È´òÂÖ¥', score: 2 },\n          { word: 'ÂñúÊ¨¢', score: 1.5 },\n          { word: 'Áà±', score: 2 },\n          { word: 'Ê£í', score: 1.5 },\n          { word: 'Â•Ω', score: 1 },\n          { word: '‰ºòÁßÄ', score: 1.5 },\n          { word: 'ÊÑüÊÅ©', score: 1.5 },\n          { word: 'Â∏åÊúõ', score: 1 },\n          { word: 'Âä†Ê≤π', score: 1.5 },\n          { word: 'ÁæéÂ•Ω', score: 1.5 },\n          { word: 'Ê∏©Êöñ', score: 1.5 }\n        ].forEach(({ word, score }) => {\n          // @ts-ignore\n          this.analyzer.addWord(word, score);\n        });\n\n        // Ê∑ªÂä†Ê∂àÊûÅÊÉÖÊÑüËØç\n        [\n          { word: 'ÈöæËøá', score: -2 },\n          { word: '‰º§ÂøÉ', score: -2 },\n          { word: 'ÁóõËã¶', score: -2 },\n          { word: 'ËÆ®Âéå', score: -1.5 },\n          { word: 'ÁÉ¶', score: -1.5 },\n          { word: 'Á≥üÁ≥ï', score: -1.5 },\n          { word: 'Â§±Êúõ', score: -1.5 },\n          { word: 'ÁÑ¶Ëôë', score: -1.5 },\n          { word: 'ÁîüÊ∞î', score: -1.5 },\n          { word: 'Áñ≤ÊÉ´', score: -1 },\n          { word: 'Â≠§Áã¨', score: -1.5 },\n          { word: 'ÂéãÂäõ', score: -1 },\n          { word: 'ÊãÖÂøÉ', score: -1 }\n        ].forEach(({ word, score }) => {\n          // @ts-ignore\n          this.analyzer.addWord(word, score);\n        });\n      }\n    } catch (error) {\n      console.warn('Ê∑ªÂä†Ëá™ÂÆö‰πâËØçÂÖ∏Â§±Ë¥•ÔºåÂ∞Ü‰ΩøÁî®ÈªòËÆ§ËØçÂÖ∏', error);\n    }\n  }\n\n  private adjustScoreBasedOnContext(text: string, score: number): number {\n    let adjustedScore = score;\n\n    // 1. Ê£ÄÊü•Ë°®ÊÉÖÁ¨¶Âè∑\n    const positiveEmojis = ['üòä', 'üòÑ', 'üòÉ', 'üòÄ', 'üòÅ', 'üòÜ', 'üòÖ', 'üòÇ', 'ü§£', '‚ù§Ô∏è', 'ü•∞', '‚ú®'];\n    const negativeEmojis = ['üò¢', 'üò≠', 'üòû', 'üòî', 'üòü', 'üòï', 'üò£', 'üòñ', 'üò´', 'üò©', 'üò±', 'üò®'];\n\n    positiveEmojis.forEach(emoji => {\n      if (text.includes(emoji)) adjustedScore += 0.2;\n    });\n    negativeEmojis.forEach(emoji => {\n      if (text.includes(emoji)) adjustedScore -= 0.2;\n    });\n\n    // 2. Ê£ÄÊü•Ê†áÁÇπÁ¨¶Âè∑\n    const exclamationCount = (text.match(/!|ÔºÅ/g) || []).length;\n    adjustedScore += exclamationCount * 0.1; // ÊÑüÂèπÂè∑ÈÄöÂ∏∏Ë°®Á§∫Âº∫ÁÉàÊÉÖÊÑü\n\n    // 3. Ê£ÄÊü•Á®ãÂ∫¶ËØç\n    const degreeWords = {\n      'ÈùûÂ∏∏': 0.3,\n      'Âæà': 0.2,\n      'ÁâπÂà´': 0.2,\n      'Áúü': 0.2,\n      'Â§™': 0.2,\n      'Â•Ω': 0.1\n    };\n\n    Object.entries(degreeWords).forEach(([word, value]) => {\n      if (text.includes(word)) {\n        adjustedScore = adjustedScore > 0 ? adjustedScore + value : adjustedScore - value;\n      }\n    });\n\n    // 4. ËÄÉËôëÂéÜÂè≤ÂàÜÊûêÁªìÊûúÔºàÊÉÖÊÑüËøûÁª≠ÊÄßÔºâ\n    if (this.lastAnalysis && this.lastAnalysis.result === 'positive') {\n      adjustedScore += 0.1; // ËΩªÂæÆÂÅèÂêë‰∏ä‰∏ÄÊ¨°ÁöÑÊÉÖÊÑü\n    } else if (this.lastAnalysis && this.lastAnalysis.result === 'negative') {\n      adjustedScore -= 0.1;\n    }\n\n    return adjustedScore;\n  }\n\n  public async analyzeEmotion(text: string): Promise<EmotionType> {\n    try {\n      const result = await this.analyzer.getSentiment(text);\n      \n      // 1. Ëé∑ÂèñÂü∫Á°ÄÂàÜÊï∞\n      let score = result.score;\n      \n      // 2. Ê†πÊçÆ‰∏ä‰∏ãÊñáË∞ÉÊï¥ÂàÜÊï∞\n      score = this.adjustScoreBasedOnContext(text, score);\n      \n      // 3. Á°ÆÂÆöÊÉÖÊÑüÁ±ªÂûã\n      let emotionType: EmotionType;\n      if (score > 0.15) { // ÊèêÈ´òÁßØÊûÅÊÉÖÊÑüÁöÑÈòàÂÄº\n        emotionType = 'positive';\n      } else if (score < -0.1) { // Èôç‰ΩéÊ∂àÊûÅÊÉÖÊÑüÁöÑÈòàÂÄºÔºå‰ΩøÁ≥ªÁªüÊõ¥ÂÆπÊòìËØÜÂà´Ê∂àÊûÅÊÉÖÊÑü\n        emotionType = 'negative';\n      } else {\n        // ÂØπ‰∫é‰∏≠ÊÄßÊÉÖÊÑüÔºåÊàë‰ª¨Ê†πÊçÆÊõ¥Â§öÁâπÂæÅÊù•Âà§Êñ≠\n        const hasPositiveWords = result.positive.length > 0;\n        const hasNegativeWords = result.negative.length > 0;\n        \n        if (hasPositiveWords && !hasNegativeWords) {\n          emotionType = 'positive';\n        } else if (hasNegativeWords && !hasPositiveWords) {\n          emotionType = 'negative';\n        } else {\n          // Â¶ÇÊûúËøòÊòØÊó†Ê≥ïÂà§Êñ≠Ôºå‰øùÊåÅÁßØÊûÅÂÄæÂêë\n          emotionType = 'positive';\n        }\n      }\n\n      // 4. Êõ¥Êñ∞ÂàÜÊûêÂéÜÂè≤\n      this.lastAnalysis = { text, result: emotionType };\n      this.analysisHistory.push({ text, result: emotionType });\n      if (this.analysisHistory.length > 10) {\n        this.analysisHistory.shift(); // ‰øùÊåÅÂéÜÂè≤ËÆ∞ÂΩïÂú®ÂêàÁêÜËåÉÂõ¥ÂÜÖ\n      }\n\n      return emotionType;\n    } catch (error) {\n      console.error('ÊÉÖÊÑüÂàÜÊûêÂá∫Èîô:', error);\n      // Â¶ÇÊûúÂàÜÊûêÂá∫ÈîôÔºåÊ†πÊçÆÂéÜÂè≤ËÆ∞ÂΩïËøîÂõû‰∏Ä‰∏™ÂèØËÉΩÁöÑÁªìÊûú\n      if (this.lastAnalysis) {\n        return this.lastAnalysis.result;\n      }\n      // Â¶ÇÊûúÊ≤°ÊúâÂéÜÂè≤ËÆ∞ÂΩïÔºåËøîÂõûÁßØÊûÅ\n      return 'positive';\n    }\n  }\n\n  // Áî®‰∫éË∞ÉËØïÂíå‰ºòÂåñÁöÑÊñπÊ≥ï\n  public getAnalysisStats() {\n    return {\n      historyLength: this.analysisHistory.length,\n      positiveCount: this.analysisHistory.filter(item => item.result === 'positive').length,\n      negativeCount: this.analysisHistory.filter(item => item.result === 'negative').length,\n      lastAnalysis: this.lastAnalysis\n    };\n  }\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}