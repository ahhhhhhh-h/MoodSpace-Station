{"ast":null,"code":"/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst {\n  containerBootstrap\n} = require('@nlpjs/core-loader');\nconst {\n  LangAll\n} = require('@nlpjs/lang-all');\nconst {\n  NluNeural\n} = require('@nlpjs/nlu');\nclass BrainNLU {\n  constructor(settings = {}) {\n    this.settings = settings;\n    if (!this.settings.container) {\n      this.settings.container = containerBootstrap();\n    }\n    this.container = this.settings.container;\n    this.container.use(LangAll);\n    if (!this.settings.l) this.nlu = new NluNeural({\n      locale: this.settings.locale || this.settings.language || 'en'\n    });\n    this.corpus = [];\n  }\n  add(utterance, intent) {\n    if (typeof utterance !== 'string') {\n      throw new Error('Utterance must be an string');\n    }\n    if (typeof intent !== 'string') {\n      throw new Error('Intent must be an string');\n    }\n    this.corpus.push({\n      utterance,\n      intent\n    });\n  }\n  train() {\n    return this.nlu.train(this.corpus, this.settings);\n  }\n  async getClassifications(utterance) {\n    const result = await this.nlu.process(utterance);\n    return result.classifications.sort((a, b) => b.score - a.score);\n  }\n  async getBestClassification(utterance) {\n    const result = await this.getClassifications(utterance);\n    return result[0];\n  }\n}\nmodule.exports = BrainNLU;","map":{"version":3,"names":["containerBootstrap","require","LangAll","NluNeural","BrainNLU","constructor","settings","container","use","l","nlu","locale","language","corpus","add","utterance","intent","Error","push","train","getClassifications","result","process","classifications","sort","a","b","score","getBestClassification","module","exports"],"sources":["/Users/zyq/Desktop/大二下/暑期实习/moonshot project/node_modules/node-nlp/src/nlu/brain-nlu.js"],"sourcesContent":["/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nconst { containerBootstrap } = require('@nlpjs/core-loader');\nconst { LangAll } = require('@nlpjs/lang-all');\nconst { NluNeural } = require('@nlpjs/nlu');\n\nclass BrainNLU {\n  constructor(settings = {}) {\n    this.settings = settings;\n    if (!this.settings.container) {\n      this.settings.container = containerBootstrap();\n    }\n    this.container = this.settings.container;\n    this.container.use(LangAll);\n    if (!this.settings.l)\n      this.nlu = new NluNeural({\n        locale: this.settings.locale || this.settings.language || 'en',\n      });\n    this.corpus = [];\n  }\n\n  add(utterance, intent) {\n    if (typeof utterance !== 'string') {\n      throw new Error('Utterance must be an string');\n    }\n    if (typeof intent !== 'string') {\n      throw new Error('Intent must be an string');\n    }\n    this.corpus.push({ utterance, intent });\n  }\n\n  train() {\n    return this.nlu.train(this.corpus, this.settings);\n  }\n\n  async getClassifications(utterance) {\n    const result = await this.nlu.process(utterance);\n    return result.classifications.sort((a, b) => b.score - a.score);\n  }\n\n  async getBestClassification(utterance) {\n    const result = await this.getClassifications(utterance);\n    return result[0];\n  }\n}\n\nmodule.exports = BrainNLU;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAM;EAAEA;AAAmB,CAAC,GAAGC,OAAO,CAAC,oBAAoB,CAAC;AAC5D,MAAM;EAAEC;AAAQ,CAAC,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AAC9C,MAAM;EAAEE;AAAU,CAAC,GAAGF,OAAO,CAAC,YAAY,CAAC;AAE3C,MAAMG,QAAQ,CAAC;EACbC,WAAWA,CAACC,QAAQ,GAAG,CAAC,CAAC,EAAE;IACzB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IACxB,IAAI,CAAC,IAAI,CAACA,QAAQ,CAACC,SAAS,EAAE;MAC5B,IAAI,CAACD,QAAQ,CAACC,SAAS,GAAGP,kBAAkB,CAAC,CAAC;IAChD;IACA,IAAI,CAACO,SAAS,GAAG,IAAI,CAACD,QAAQ,CAACC,SAAS;IACxC,IAAI,CAACA,SAAS,CAACC,GAAG,CAACN,OAAO,CAAC;IAC3B,IAAI,CAAC,IAAI,CAACI,QAAQ,CAACG,CAAC,EAClB,IAAI,CAACC,GAAG,GAAG,IAAIP,SAAS,CAAC;MACvBQ,MAAM,EAAE,IAAI,CAACL,QAAQ,CAACK,MAAM,IAAI,IAAI,CAACL,QAAQ,CAACM,QAAQ,IAAI;IAC5D,CAAC,CAAC;IACJ,IAAI,CAACC,MAAM,GAAG,EAAE;EAClB;EAEAC,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAE;IACrB,IAAI,OAAOD,SAAS,KAAK,QAAQ,EAAE;MACjC,MAAM,IAAIE,KAAK,CAAC,6BAA6B,CAAC;IAChD;IACA,IAAI,OAAOD,MAAM,KAAK,QAAQ,EAAE;MAC9B,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;IAC7C;IACA,IAAI,CAACJ,MAAM,CAACK,IAAI,CAAC;MAAEH,SAAS;MAAEC;IAAO,CAAC,CAAC;EACzC;EAEAG,KAAKA,CAAA,EAAG;IACN,OAAO,IAAI,CAACT,GAAG,CAACS,KAAK,CAAC,IAAI,CAACN,MAAM,EAAE,IAAI,CAACP,QAAQ,CAAC;EACnD;EAEA,MAAMc,kBAAkBA,CAACL,SAAS,EAAE;IAClC,MAAMM,MAAM,GAAG,MAAM,IAAI,CAACX,GAAG,CAACY,OAAO,CAACP,SAAS,CAAC;IAChD,OAAOM,MAAM,CAACE,eAAe,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACC,KAAK,GAAGF,CAAC,CAACE,KAAK,CAAC;EACjE;EAEA,MAAMC,qBAAqBA,CAACb,SAAS,EAAE;IACrC,MAAMM,MAAM,GAAG,MAAM,IAAI,CAACD,kBAAkB,CAACL,SAAS,CAAC;IACvD,OAAOM,MAAM,CAAC,CAAC,CAAC;EAClB;AACF;AAEAQ,MAAM,CAACC,OAAO,GAAG1B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}