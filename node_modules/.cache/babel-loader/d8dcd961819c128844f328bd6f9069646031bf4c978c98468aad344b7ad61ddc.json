{"ast":null,"code":"/*\n * Copyright 2014 Takuya Asano\n * Copyright 2010-2014 Atilika Inc. and contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\"use strict\";\n\nvar ViterbiNode = require(\"./ViterbiNode\");\n\n/**\n * ViterbiLattice is a lattice in Viterbi algorithm\n * @constructor\n */\nfunction ViterbiLattice() {\n  this.nodes_end_at = [];\n  this.nodes_end_at[0] = [new ViterbiNode(-1, 0, 0, 0, \"BOS\", 0, 0, \"\")];\n  this.eos_pos = 1;\n}\n\n/**\n * Append node to ViterbiLattice\n * @param {ViterbiNode} node\n */\nViterbiLattice.prototype.append = function (node) {\n  var last_pos = node.start_pos + node.length - 1;\n  if (this.eos_pos < last_pos) {\n    this.eos_pos = last_pos;\n  }\n  var prev_nodes = this.nodes_end_at[last_pos];\n  if (prev_nodes == null) {\n    prev_nodes = [];\n  }\n  prev_nodes.push(node);\n  this.nodes_end_at[last_pos] = prev_nodes;\n};\n\n/**\n * Set ends with EOS (End of Statement)\n */\nViterbiLattice.prototype.appendEos = function () {\n  var last_index = this.nodes_end_at.length;\n  this.eos_pos++;\n  this.nodes_end_at[last_index] = [new ViterbiNode(-1, 0, this.eos_pos, 0, \"EOS\", 0, 0, \"\")];\n};\nmodule.exports = ViterbiLattice;","map":{"version":3,"names":["ViterbiNode","require","ViterbiLattice","nodes_end_at","eos_pos","prototype","append","node","last_pos","start_pos","length","prev_nodes","push","appendEos","last_index","module","exports"],"sources":["/Users/zyq/Desktop/大二下/暑期实习/moonshot project/node_modules/kuromoji/src/viterbi/ViterbiLattice.js"],"sourcesContent":["/*\n * Copyright 2014 Takuya Asano\n * Copyright 2010-2014 Atilika Inc. and contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\"use strict\";\n\nvar ViterbiNode = require(\"./ViterbiNode\");\n\n/**\n * ViterbiLattice is a lattice in Viterbi algorithm\n * @constructor\n */\nfunction ViterbiLattice() {\n    this.nodes_end_at = [];\n    this.nodes_end_at[0] = [ new ViterbiNode(-1, 0, 0, 0, \"BOS\", 0, 0, \"\") ];\n    this.eos_pos = 1;\n}\n\n/**\n * Append node to ViterbiLattice\n * @param {ViterbiNode} node\n */\nViterbiLattice.prototype.append = function (node) {\n    var last_pos = node.start_pos + node.length - 1;\n    if (this.eos_pos < last_pos) {\n        this.eos_pos = last_pos;\n    }\n\n    var prev_nodes = this.nodes_end_at[last_pos];\n    if (prev_nodes == null) {\n        prev_nodes = [];\n    }\n    prev_nodes.push(node);\n\n    this.nodes_end_at[last_pos] = prev_nodes;\n};\n\n/**\n * Set ends with EOS (End of Statement)\n */\nViterbiLattice.prototype.appendEos = function () {\n    var last_index = this.nodes_end_at.length;\n    this.eos_pos++;\n    this.nodes_end_at[last_index] = [ new ViterbiNode(-1, 0, this.eos_pos, 0, \"EOS\", 0, 0, \"\") ];\n};\n\nmodule.exports = ViterbiLattice;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,WAAW,GAAGC,OAAO,CAAC,eAAe,CAAC;;AAE1C;AACA;AACA;AACA;AACA,SAASC,cAAcA,CAAA,EAAG;EACtB,IAAI,CAACC,YAAY,GAAG,EAAE;EACtB,IAAI,CAACA,YAAY,CAAC,CAAC,CAAC,GAAG,CAAE,IAAIH,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAE;EACxE,IAAI,CAACI,OAAO,GAAG,CAAC;AACpB;;AAEA;AACA;AACA;AACA;AACAF,cAAc,CAACG,SAAS,CAACC,MAAM,GAAG,UAAUC,IAAI,EAAE;EAC9C,IAAIC,QAAQ,GAAGD,IAAI,CAACE,SAAS,GAAGF,IAAI,CAACG,MAAM,GAAG,CAAC;EAC/C,IAAI,IAAI,CAACN,OAAO,GAAGI,QAAQ,EAAE;IACzB,IAAI,CAACJ,OAAO,GAAGI,QAAQ;EAC3B;EAEA,IAAIG,UAAU,GAAG,IAAI,CAACR,YAAY,CAACK,QAAQ,CAAC;EAC5C,IAAIG,UAAU,IAAI,IAAI,EAAE;IACpBA,UAAU,GAAG,EAAE;EACnB;EACAA,UAAU,CAACC,IAAI,CAACL,IAAI,CAAC;EAErB,IAAI,CAACJ,YAAY,CAACK,QAAQ,CAAC,GAAGG,UAAU;AAC5C,CAAC;;AAED;AACA;AACA;AACAT,cAAc,CAACG,SAAS,CAACQ,SAAS,GAAG,YAAY;EAC7C,IAAIC,UAAU,GAAG,IAAI,CAACX,YAAY,CAACO,MAAM;EACzC,IAAI,CAACN,OAAO,EAAE;EACd,IAAI,CAACD,YAAY,CAACW,UAAU,CAAC,GAAG,CAAE,IAAId,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAACI,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAE;AAChG,CAAC;AAEDW,MAAM,CAACC,OAAO,GAAGd,cAAc","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}