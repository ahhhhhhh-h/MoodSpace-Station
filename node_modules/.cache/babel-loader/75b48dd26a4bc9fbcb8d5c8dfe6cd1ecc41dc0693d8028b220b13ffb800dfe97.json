{"ast":null,"code":"/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\nconst {\n  defaultContainer\n} = require('./container');\nclass Clonable {\n  /**\n   * Constructor of the class\n   * @param {object} settings\n   */\n  constructor(settings = {}, container = defaultContainer) {\n    this.container = settings.container || container;\n    this.applySettings(this, settings);\n  }\n  get logger() {\n    return this.container.get('logger');\n  }\n\n  /**\n   * Apply default settings to an object.\n   * @param {object} obj Target object.\n   * @param {object} settings Input settings.\n   */\n  applySettings(srcobj, settings = {}) {\n    const obj = srcobj || {};\n    Object.keys(settings).forEach(key => {\n      if (obj[key] === undefined) {\n        obj[key] = settings[key];\n      }\n    });\n    return obj;\n  }\n  toJSON() {\n    const settings = this.jsonExport || {};\n    const result = {};\n    const keys = Object.keys(this);\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      if (key !== 'jsonExport' && key !== 'jsonImport' && key !== 'container' && !key.startsWith('pipeline')) {\n        const fn = settings[key] === undefined ? true : settings[key];\n        if (typeof fn === 'function') {\n          const value = fn.bind(this)(result, this, key, this[key]);\n          if (value) {\n            result[key] = value;\n          }\n        } else if (typeof fn === 'boolean') {\n          if (fn) {\n            result[key] = this[key];\n            if (key === 'settings') {\n              delete result[key].container;\n            }\n          }\n        } else if (typeof fn === 'string') {\n          result[fn] = this[key];\n        }\n      }\n    }\n    return result;\n  }\n  fromJSON(json) {\n    const settings = this.jsonImport || {};\n    const keys = Object.keys(json);\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      const fn = settings[key] === undefined ? true : settings[key];\n      if (typeof fn === 'function') {\n        const value = fn.bind(this)(this, json, key, json[key]);\n        if (value) {\n          this[key] = value;\n        }\n      } else if (typeof fn === 'boolean') {\n        if (fn) {\n          this[key] = json[key];\n        }\n      } else if (typeof fn === 'string') {\n        this[fn] = json[key];\n      }\n    }\n  }\n  objToValues(obj, srcKeys) {\n    const keys = srcKeys || Object.keys(obj);\n    const result = [];\n    for (let i = 0; i < keys.length; i += 1) {\n      result.push(obj[keys[i]]);\n    }\n    return result;\n  }\n  valuesToObj(values, keys) {\n    const result = {};\n    for (let i = 0; i < values.length; i += 1) {\n      result[keys[i]] = values[i];\n    }\n    return result;\n  }\n  getPipeline(tag) {\n    return this.container.getPipeline(tag);\n  }\n  async runPipeline(input, pipeline) {\n    return this.container.runPipeline(pipeline || this.pipeline, input, this);\n  }\n  use(item) {\n    this.container.use(item);\n  }\n}\nmodule.exports = Clonable;","map":{"version":3,"names":["defaultContainer","require","Clonable","constructor","settings","container","applySettings","logger","get","srcobj","obj","Object","keys","forEach","key","undefined","toJSON","jsonExport","result","i","length","startsWith","fn","value","bind","fromJSON","json","jsonImport","objToValues","srcKeys","push","valuesToObj","values","getPipeline","tag","runPipeline","input","pipeline","use","item","module","exports"],"sources":["/Users/zyq/Desktop/大二下/暑期实习/moonshot project/node_modules/@nlpjs/core/src/clonable.js"],"sourcesContent":["/*\n * Copyright (c) AXA Group Operations Spain S.A.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\nconst { defaultContainer } = require('./container');\n\nclass Clonable {\n  /**\n   * Constructor of the class\n   * @param {object} settings\n   */\n  constructor(settings = {}, container = defaultContainer) {\n    this.container = settings.container || container;\n    this.applySettings(this, settings);\n  }\n\n  get logger() {\n    return this.container.get('logger');\n  }\n\n  /**\n   * Apply default settings to an object.\n   * @param {object} obj Target object.\n   * @param {object} settings Input settings.\n   */\n  applySettings(srcobj, settings = {}) {\n    const obj = srcobj || {};\n    Object.keys(settings).forEach((key) => {\n      if (obj[key] === undefined) {\n        obj[key] = settings[key];\n      }\n    });\n    return obj;\n  }\n\n  toJSON() {\n    const settings = this.jsonExport || {};\n    const result = {};\n    const keys = Object.keys(this);\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      if (\n        key !== 'jsonExport' &&\n        key !== 'jsonImport' &&\n        key !== 'container' &&\n        !key.startsWith('pipeline')\n      ) {\n        const fn = settings[key] === undefined ? true : settings[key];\n        if (typeof fn === 'function') {\n          const value = fn.bind(this)(result, this, key, this[key]);\n          if (value) {\n            result[key] = value;\n          }\n        } else if (typeof fn === 'boolean') {\n          if (fn) {\n            result[key] = this[key];\n            if (key === 'settings') {\n              delete result[key].container;\n            }\n          }\n        } else if (typeof fn === 'string') {\n          result[fn] = this[key];\n        }\n      }\n    }\n    return result;\n  }\n\n  fromJSON(json) {\n    const settings = this.jsonImport || {};\n    const keys = Object.keys(json);\n    for (let i = 0; i < keys.length; i += 1) {\n      const key = keys[i];\n      const fn = settings[key] === undefined ? true : settings[key];\n      if (typeof fn === 'function') {\n        const value = fn.bind(this)(this, json, key, json[key]);\n        if (value) {\n          this[key] = value;\n        }\n      } else if (typeof fn === 'boolean') {\n        if (fn) {\n          this[key] = json[key];\n        }\n      } else if (typeof fn === 'string') {\n        this[fn] = json[key];\n      }\n    }\n  }\n\n  objToValues(obj, srcKeys) {\n    const keys = srcKeys || Object.keys(obj);\n    const result = [];\n    for (let i = 0; i < keys.length; i += 1) {\n      result.push(obj[keys[i]]);\n    }\n    return result;\n  }\n\n  valuesToObj(values, keys) {\n    const result = {};\n    for (let i = 0; i < values.length; i += 1) {\n      result[keys[i]] = values[i];\n    }\n    return result;\n  }\n\n  getPipeline(tag) {\n    return this.container.getPipeline(tag);\n  }\n\n  async runPipeline(input, pipeline) {\n    return this.container.runPipeline(pipeline || this.pipeline, input, this);\n  }\n\n  use(item) {\n    this.container.use(item);\n  }\n}\n\nmodule.exports = Clonable;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}