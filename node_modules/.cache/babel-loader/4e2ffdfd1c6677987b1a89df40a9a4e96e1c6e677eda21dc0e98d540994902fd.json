{"ast":null,"code":"import React,{useState,useEffect,useMemo,useRef}from'react';import styled,{keyframes,css}from'styled-components';import{moonImage,starIcon,meteorIcon,flower1Icon,flower2Icon,flower3Icon,othersIcon}from'../assets';import{ReplyBox}from'./ReplyBox';import{ResponseMessage}from'./ResponseMessage';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const rotate=keyframes`\n  from { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n`;const float=keyframes`\n  0% { transform: translateY(0px); }\n  50% { transform: translateY(-8px); }\n  100% { transform: translateY(0px); }\n`;const fadeAway=keyframes`\n  0% {\n    transform: translate(0, 0) scale(1);\n    opacity: 1;\n  }\n  100% {\n    transform: translate(100px, -100px) scale(0.1);\n    opacity: 0;\n  }\n`;const MoonContainer=styled.div`\n  position: absolute;\n  top: 50%; left: 50%;\n  transform: translate(-50%, -50%);\n  width: 360px; height: 360px;\n  pointer-events: none;\n`;const MoonSphere=styled.div`\n  width: 100%; height: 100%;\n  border-radius: 50%;\n  background: url(${moonImage}) no-repeat center center;\n  background-size: cover;\n  animation: ${rotate} 60s linear infinite;\n  box-shadow: inset -25px -25px 40px rgba(0,0,0,0.3);\n`;const FlowerOverlay=styled.div`\n  position: absolute;\n  top: 0; left: 0;\n  width: 100%; height: 100%;\n  pointer-events: auto;\n`;const FlowerDot=styled.div`\n  position: absolute;\n  left: ${p=>p.$x}px;\n  top: ${p=>p.$y}px;\n  width: 32px;\n  height: 32px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ${p=>p.flowerType==='flower1'?`url(${flower1Icon})`:p.flowerType==='flower2'?`url(${flower2Icon})`:`url(${flower3Icon})`};\n`;const CelestialBodyContainer=styled.div`\n  position: absolute;\n  left: ${props=>props.x}px;\n  top: ${props=>props.y}px;\n  width: 48px;\n  height: 48px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  transition: transform 0.3s ease-in-out;\n  animation: ${props=>{if(props.isExternal&&props.isReplied){return css`${fadeAway} 8s ease-in-out forwards`;}return css`${float} 5s ease-in-out infinite`;}};\n\n  &.disappearing {\n    animation: ${fadeAway} 0.8s ease-in-out forwards !important;\n  }\n\n  ${props=>{if(props.isExternal){return`background-image: url(${othersIcon});`;}switch(props.type){case'positive':return`background-image: url(${starIcon});`;case'negative':return`background-image: url(${meteorIcon});`;case'received':return`background-image: url(${starIcon});`;default:return'';}}}\n\n  &:hover {\n    transform: scale(1.2);\n    z-index: 10;\n  }\n\n  &:hover div {\n    opacity: 1;\n  }\n`;const Tooltip=styled.div`\n  position: absolute;\n  left: 50%;\n  top: -40px;\n  transform: translateX(-50%);\n  background: rgba(255, 255, 255, 0.15);\n  backdrop-filter: blur(6px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 8px 12px;\n  border-radius: 8px;\n  font-size: 14px;\n  white-space: pre-wrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.3s ease, transform 0.3s ease;\n  z-index: 100;\n  min-width: 120px;\n  max-width: 200px;\n  text-align: center;\n\n  .content {\n    font-size: 14px;\n    margin-bottom: 4px;\n  }\n\n  .meta {\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.8);\n    margin-top: 4px;\n  }\n\n  &::after {\n    content: '';\n    position: absolute;\n    left: 50%;\n    bottom: -5px;\n    transform: translateX(-50%) rotate(45deg);\n    width: 10px;\n    height: 10px;\n    background: rgba(255, 255, 255, 0.15);\n    border-left: 1px solid rgba(255, 255, 255, 0.3);\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n    backdrop-filter: blur(6px);\n  }\n`;const PositionWrapper=styled.div`\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  pointer-events: none;\n\n  div {\n    pointer-events: auto;\n  }\n`;export const Moon=_ref=>{let{celestialBodies,setCelestialBodies,flowers=[],isRadioOn=false}=_ref;const[positions,setPositions]=useState({});const[selectedCelestialBody,setSelectedCelestialBody]=useState(null);const[repliedBodies,setRepliedBodies]=useState(new Set());const[showResponseMessage,setShowResponseMessage]=useState(false);const[disappearingId,setDisappearingId]=useState(null);const[showMeteorMessage,setShowMeteorMessage]=useState(false);const meteorTimerRef=useRef(null);const moonCenter=useMemo(()=>{const topOffset=120;const bottomOffset=180;return{x:window.innerWidth/2,y:(window.innerHeight-topOffset-bottomOffset)/2+topOffset};},[]);useEffect(()=>{const w=window.innerWidth;const h=window.innerHeight;const moonR=150;const celestialSize=48;const moonX=moonCenter.x;const moonY=moonCenter.y;const topMargin=120;const bottomMargin=180;const sideMargin=100;const minX=sideMargin;const maxX=w-sideMargin-celestialSize;const minY=topMargin;const maxY=h-bottomMargin-celestialSize;const safeDistance=moonR+80;const newPos={};celestialBodies.forEach(body=>{if(positions[body.id]){newPos[body.id]=positions[body.id];}else{let x,y,distToMoon,cnt=0;do{x=Math.random()*(maxX-minX)+minX;y=Math.random()*(maxY-minY)+minY;distToMoon=Math.hypot(x-moonX,y-moonY);// ✅ 每次新算一次\ncnt++;}while(cnt<100&&(distToMoon<safeDistance||Object.values(newPos).some(pos=>Math.hypot(x-pos.x,y-pos.y)<celestialSize*1.5)));newPos[body.id]={x,y};}});setPositions(newPos);},[celestialBodies,moonCenter]);const handleCelestialBodyClick=body=>{if(body.isExternal&&isRadioOn){setSelectedCelestialBody(body);}};const handleReplySubmit=replyText=>{if(selectedCelestialBody&&replyText.trim()){const updatedReplies=new Set([...Array.from(selectedCelestialBody.replies),replyText]);const updatedCelestialBodies=celestialBodies.map(body=>{if(body.id===selectedCelestialBody.id){return{...body,replies:updatedReplies};}return body;});setCelestialBodies(updatedCelestialBodies);if(selectedCelestialBody.isExternal){setShowResponseMessage(true);setTimeout(()=>{setShowResponseMessage(false);},6000);}setSelectedCelestialBody(null);setRepliedBodies(prev=>new Set([...prev,selectedCelestialBody.id]));}};const handleReplyClose=()=>{setSelectedCelestialBody(null);};const visibleBodies=celestialBodies.filter(body=>!body.isExternal||body.isExternal&&isRadioOn);return/*#__PURE__*/_jsxs(PositionWrapper,{children:[/*#__PURE__*/_jsxs(MoonContainer,{children:[/*#__PURE__*/_jsx(MoonSphere,{}),/*#__PURE__*/_jsx(FlowerOverlay,{children:flowers.map(flower=>/*#__PURE__*/_jsx(FlowerDot,{$x:flower.position.x,$y:flower.position.y,flowerType:flower.style},flower.id))})]}),visibleBodies.map(body=>{const pos=positions[body.id];if(!pos)return null;const isReplied=repliedBodies.has(body.id);const isDisappearing=disappearingId===body.id;// 仅为消极情绪陨石添加长按事件\nconst isMeteor=body.type==='negative';let pressTimer=null;const handlePressStart=e=>{if(!isMeteor)return;e.stopPropagation();pressTimer=setTimeout(()=>{setDisappearingId(body.id);setTimeout(()=>{setDisappearingId(null);setShowMeteorMessage(true);setCelestialBodies(prev=>prev.filter(b=>b.id!==body.id));setTimeout(()=>setShowMeteorMessage(false),5000);},800);},800);meteorTimerRef.current=pressTimer;};const handlePressEnd=()=>{if(pressTimer)clearTimeout(pressTimer);if(meteorTimerRef.current)clearTimeout(meteorTimerRef.current);};return/*#__PURE__*/_jsx(CelestialBodyContainer,{type:body.type,x:pos.x,y:pos.y,isExternal:body.isExternal,isReplied:isReplied&&body.isExternal,className:isDisappearing?'disappearing':'',onMouseDown:handlePressStart,onTouchStart:handlePressStart,onMouseUp:handlePressEnd,onMouseLeave:handlePressEnd,onTouchEnd:handlePressEnd,onClick:()=>handleCelestialBodyClick(body),children:/*#__PURE__*/_jsx(Tooltip,{children:body.isExternal?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:body.content}),/*#__PURE__*/_jsxs(\"div\",{className:\"meta\",children:[\"\\u6765\\u81EA\\uFF1A\",body.sender,/*#__PURE__*/_jsx(\"br\",{}),new Date(body.timestamp).toLocaleString('zh-CN',{month:'numeric',day:'numeric',hour:'2-digit',minute:'2-digit'})]})]}):/*#__PURE__*/_jsx(\"div\",{children:body.content})})},body.id);}),selectedCelestialBody&&/*#__PURE__*/_jsx(ReplyBox,{content:selectedCelestialBody.content,onSubmit:handleReplySubmit,onClose:handleReplyClose,replies:Array.from(selectedCelestialBody.replies)}),showResponseMessage&&/*#__PURE__*/_jsx(ResponseMessage,{onAnimationEnd:()=>setShowResponseMessage(false)}),showMeteorMessage&&/*#__PURE__*/_jsx(ResponseMessage,{onAnimationEnd:()=>setShowMeteorMessage(false),message:\"\\u60C5\\u7EEA\\u5DF2\\u5F52\\u4E8E\\u5B87\\u5B99\\uFF0C\\u672A\\u6765\\u5C06\\u66F4\\u52A0\\u95EA\\u8000\"})]});};","map":{"version":3,"names":["React","useState","useEffect","useMemo","useRef","styled","keyframes","css","moonImage","starIcon","meteorIcon","flower1Icon","flower2Icon","flower3Icon","othersIcon","ReplyBox","ResponseMessage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","rotate","float","fadeAway","MoonContainer","div","MoonSphere","FlowerOverlay","FlowerDot","p","$x","$y","flowerType","CelestialBodyContainer","props","x","y","isExternal","isReplied","type","Tooltip","PositionWrapper","Moon","_ref","celestialBodies","setCelestialBodies","flowers","isRadioOn","positions","setPositions","selectedCelestialBody","setSelectedCelestialBody","repliedBodies","setRepliedBodies","Set","showResponseMessage","setShowResponseMessage","disappearingId","setDisappearingId","showMeteorMessage","setShowMeteorMessage","meteorTimerRef","moonCenter","topOffset","bottomOffset","window","innerWidth","innerHeight","w","h","moonR","celestialSize","moonX","moonY","topMargin","bottomMargin","sideMargin","minX","maxX","minY","maxY","safeDistance","newPos","forEach","body","id","distToMoon","cnt","Math","random","hypot","Object","values","some","pos","handleCelestialBodyClick","handleReplySubmit","replyText","trim","updatedReplies","Array","from","replies","updatedCelestialBodies","map","setTimeout","prev","handleReplyClose","visibleBodies","filter","children","flower","position","style","has","isDisappearing","isMeteor","pressTimer","handlePressStart","e","stopPropagation","b","current","handlePressEnd","clearTimeout","className","onMouseDown","onTouchStart","onMouseUp","onMouseLeave","onTouchEnd","onClick","content","sender","Date","timestamp","toLocaleString","month","day","hour","minute","onSubmit","onClose","onAnimationEnd","message"],"sources":["/Users/zyq/Desktop/大二下/暑期实习/moonshot project/src/components/Moon.tsx"],"sourcesContent":["import React, { useState, useEffect, useMemo, useRef } from 'react';\nimport styled, { keyframes, css } from 'styled-components';\nimport { CelestialBody, Flower, EmotionType } from '../types';\nimport {\n  moonImage,\n  starIcon,\n  meteorIcon,\n  flower1Icon,\n  flower2Icon,\n  flower3Icon,\n  othersIcon\n} from '../assets';\nimport { ReplyBox } from './ReplyBox';\nimport { ResponseMessage } from './ResponseMessage';\n\nconst rotate = keyframes`\n  from { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n`;\n\nconst float = keyframes`\n  0% { transform: translateY(0px); }\n  50% { transform: translateY(-8px); }\n  100% { transform: translateY(0px); }\n`;\n\nconst fadeAway = keyframes`\n  0% {\n    transform: translate(0, 0) scale(1);\n    opacity: 1;\n  }\n  100% {\n    transform: translate(100px, -100px) scale(0.1);\n    opacity: 0;\n  }\n`;\n\nconst MoonContainer = styled.div`\n  position: absolute;\n  top: 50%; left: 50%;\n  transform: translate(-50%, -50%);\n  width: 360px; height: 360px;\n  pointer-events: none;\n`;\n\nconst MoonSphere = styled.div`\n  width: 100%; height: 100%;\n  border-radius: 50%;\n  background: url(${moonImage}) no-repeat center center;\n  background-size: cover;\n  animation: ${rotate} 60s linear infinite;\n  box-shadow: inset -25px -25px 40px rgba(0,0,0,0.3);\n`;\n\nconst FlowerOverlay = styled.div`\n  position: absolute;\n  top: 0; left: 0;\n  width: 100%; height: 100%;\n  pointer-events: auto;\n`;\n\ninterface FlowerDotProps {\n  $x: number;\n  $y: number;\n  flowerType: 'flower1' | 'flower2' | 'flower3';\n}\nconst FlowerDot = styled.div<FlowerDotProps>`\n  position: absolute;\n  left: ${p => p.$x}px;\n  top: ${p => p.$y}px;\n  width: 32px;\n  height: 32px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-image: ${p =>\n    p.flowerType === 'flower1'\n      ? `url(${flower1Icon})`\n      : p.flowerType === 'flower2'\n      ? `url(${flower2Icon})`\n      : `url(${flower3Icon})`};\n`;\n\nconst CelestialBodyContainer = styled.div<{\n  type: EmotionType;\n  x: number;\n  y: number;\n  isExternal?: boolean;\n  isReplied?: boolean;\n}>`\n  position: absolute;\n  left: ${props => props.x}px;\n  top: ${props => props.y}px;\n  width: 48px;\n  height: 48px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  transition: transform 0.3s ease-in-out;\n  animation: ${props => {\n    if (props.isExternal && props.isReplied) {\n      return css`${fadeAway} 8s ease-in-out forwards`;\n    }\n    return css`${float} 5s ease-in-out infinite`;\n  }};\n\n  &.disappearing {\n    animation: ${fadeAway} 0.8s ease-in-out forwards !important;\n  }\n\n  ${props => {\n    if (props.isExternal) {\n      return `background-image: url(${othersIcon});`;\n    }\n    switch (props.type) {\n      case 'positive':\n        return `background-image: url(${starIcon});`;\n      case 'negative':\n        return `background-image: url(${meteorIcon});`;\n      case 'received':\n        return `background-image: url(${starIcon});`;\n      default:\n        return '';\n    }\n  }}\n\n  &:hover {\n    transform: scale(1.2);\n    z-index: 10;\n  }\n\n  &:hover div {\n    opacity: 1;\n  }\n`;\n\nconst Tooltip = styled.div`\n  position: absolute;\n  left: 50%;\n  top: -40px;\n  transform: translateX(-50%);\n  background: rgba(255, 255, 255, 0.15);\n  backdrop-filter: blur(6px);\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  color: white;\n  padding: 8px 12px;\n  border-radius: 8px;\n  font-size: 14px;\n  white-space: pre-wrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.3s ease, transform 0.3s ease;\n  z-index: 100;\n  min-width: 120px;\n  max-width: 200px;\n  text-align: center;\n\n  .content {\n    font-size: 14px;\n    margin-bottom: 4px;\n  }\n\n  .meta {\n    font-size: 12px;\n    color: rgba(255, 255, 255, 0.8);\n    margin-top: 4px;\n  }\n\n  &::after {\n    content: '';\n    position: absolute;\n    left: 50%;\n    bottom: -5px;\n    transform: translateX(-50%) rotate(45deg);\n    width: 10px;\n    height: 10px;\n    background: rgba(255, 255, 255, 0.15);\n    border-left: 1px solid rgba(255, 255, 255, 0.3);\n    border-bottom: 1px solid rgba(255, 255, 255, 0.3);\n    backdrop-filter: blur(6px);\n  }\n`;\n\nconst PositionWrapper = styled.div`\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  pointer-events: none;\n\n  div {\n    pointer-events: auto;\n  }\n`;\n\ninterface MoonProps {\n  celestialBodies: CelestialBody[];\n  setCelestialBodies: React.Dispatch<React.SetStateAction<CelestialBody[]>>;\n  flowers?: Flower[];\n  isRadioOn?: boolean;\n}\n\nexport const Moon: React.FC<MoonProps> = ({\n  celestialBodies,\n  setCelestialBodies,\n  flowers = [],\n  isRadioOn = false\n}) => {\n  const [positions, setPositions] = useState<Record<string, { x: number; y: number }>>({});\n  const [selectedCelestialBody, setSelectedCelestialBody] = useState<CelestialBody | null>(null);\n  const [repliedBodies, setRepliedBodies] = useState<Set<string>>(new Set());\n  const [showResponseMessage, setShowResponseMessage] = useState(false);\n  const [disappearingId, setDisappearingId] = useState<string | null>(null);\n  const [showMeteorMessage, setShowMeteorMessage] = useState(false);\n  const meteorTimerRef = useRef<NodeJS.Timeout | null>(null);\n\n  const moonCenter = useMemo(() => {\n    const topOffset = 120;\n    const bottomOffset = 180;\n    return {\n      x: window.innerWidth / 2,\n      y: (window.innerHeight - topOffset - bottomOffset) / 2 + topOffset\n    };\n  }, []);\n\nuseEffect(() => {\n  const w = window.innerWidth;\n  const h = window.innerHeight;\n  const moonR = 150;\n  const celestialSize = 48;\n\n  const moonX = moonCenter.x;\n  const moonY = moonCenter.y;\n\n  const topMargin = 120;\n  const bottomMargin = 180;\n  const sideMargin = 100;\n\n  const minX = sideMargin;\n  const maxX = w - sideMargin - celestialSize;\n  const minY = topMargin;\n  const maxY = h - bottomMargin - celestialSize;\n\n  const safeDistance = moonR + 80;\n\n  const newPos: Record<string, { x: number; y: number }> = {};\n\n  celestialBodies.forEach(body => {\n    if (positions[body.id]) {\n      newPos[body.id] = positions[body.id];\n    } else {\n      let x: number, y: number, distToMoon: number, cnt = 0;\n      do {\n        x = Math.random() * (maxX - minX) + minX;\n        y = Math.random() * (maxY - minY) + minY;\n        distToMoon = Math.hypot(x - moonX, y - moonY); // ✅ 每次新算一次\n\n        cnt++;\n      } while (\n        cnt < 100 && (\n          distToMoon < safeDistance ||\n          Object.values(newPos).some(pos => Math.hypot(x - pos.x, y - pos.y) < celestialSize * 1.5)\n        )\n      );\n\n      newPos[body.id] = { x, y };\n    }\n  });\n\n  setPositions(newPos);\n}, [celestialBodies, moonCenter]);\n\n\n  const handleCelestialBodyClick = (body: CelestialBody) => {\n    if (body.isExternal && isRadioOn) {\n      setSelectedCelestialBody(body);\n    }\n  };\n\n  const handleReplySubmit = (replyText: string) => {\n    if (selectedCelestialBody && replyText.trim()) {\n      const updatedReplies = new Set([...Array.from(selectedCelestialBody.replies), replyText]);\n      const updatedCelestialBodies = celestialBodies.map(body => {\n        if (body.id === selectedCelestialBody.id) {\n          return { ...body, replies: updatedReplies };\n        }\n        return body;\n      });\n      setCelestialBodies(updatedCelestialBodies);\n      if (selectedCelestialBody.isExternal) {\n        setShowResponseMessage(true);\n        setTimeout(() => {\n          setShowResponseMessage(false);\n        }, 6000);\n      }\n      setSelectedCelestialBody(null);\n      setRepliedBodies(prev => new Set([...prev, selectedCelestialBody.id]));\n    }\n  };\n\n  const handleReplyClose = () => {\n    setSelectedCelestialBody(null);\n  };\n\n  const visibleBodies = celestialBodies.filter(\n    body => !body.isExternal || (body.isExternal && isRadioOn)\n  );\n\n  return (\n    <PositionWrapper>\n      <MoonContainer>\n        <MoonSphere />\n        <FlowerOverlay>\n          {flowers.map(flower => (\n            <FlowerDot\n              key={flower.id}\n              $x={flower.position.x}\n              $y={flower.position.y}\n              flowerType={flower.style}\n            />\n          ))}\n        </FlowerOverlay>\n      </MoonContainer>\n\n      {visibleBodies.map(body => {\n        const pos = positions[body.id];\n        if (!pos) return null;\n        const isReplied = repliedBodies.has(body.id);\n        const isDisappearing = disappearingId === body.id;\n\n        // 仅为消极情绪陨石添加长按事件\n        const isMeteor = body.type === 'negative';\n        let pressTimer: NodeJS.Timeout | null = null;\n\n        const handlePressStart = (e: React.MouseEvent | React.TouchEvent) => {\n          if (!isMeteor) return;\n          e.stopPropagation();\n          pressTimer = setTimeout(() => {\n            setDisappearingId(body.id);\n            setTimeout(() => {\n              setDisappearingId(null);\n              setShowMeteorMessage(true);\n              setCelestialBodies(prev => prev.filter(b => b.id !== body.id));\n              setTimeout(() => setShowMeteorMessage(false), 5000);\n            }, 800);\n          }, 800);\n          meteorTimerRef.current = pressTimer;\n        };\n        const handlePressEnd = () => {\n          if (pressTimer) clearTimeout(pressTimer);\n          if (meteorTimerRef.current) clearTimeout(meteorTimerRef.current);\n        };\n\n        return (\n          <CelestialBodyContainer\n            key={body.id}\n            type={body.type}\n            x={pos.x}\n            y={pos.y}\n            isExternal={body.isExternal}\n            isReplied={isReplied && body.isExternal}\n            className={isDisappearing ? 'disappearing' : ''}\n            onMouseDown={handlePressStart}\n            onTouchStart={handlePressStart}\n            onMouseUp={handlePressEnd}\n            onMouseLeave={handlePressEnd}\n            onTouchEnd={handlePressEnd}\n            onClick={() => handleCelestialBodyClick(body)}\n          >\n            <Tooltip>\n              {body.isExternal ? (\n                <>\n                  <div className=\"content\">{body.content}</div>\n                  <div className=\"meta\">\n                    来自：{body.sender}\n                    <br />\n                    {new Date(body.timestamp).toLocaleString('zh-CN', {\n                      month: 'numeric',\n                      day: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })}\n                  </div>\n                </>\n              ) : (\n                <div>{body.content}</div>\n              )}\n            </Tooltip>\n          </CelestialBodyContainer>\n        );\n      })}\n\n      {selectedCelestialBody && (\n        <ReplyBox\n          content={selectedCelestialBody.content}\n          onSubmit={handleReplySubmit}\n          onClose={handleReplyClose}\n          replies={Array.from(selectedCelestialBody.replies)}\n        />\n      )}\n\n      {showResponseMessage && (\n        <ResponseMessage onAnimationEnd={() => setShowResponseMessage(false)} />\n      )}\n\n      {showMeteorMessage && (\n        <ResponseMessage\n          onAnimationEnd={() => setShowMeteorMessage(false)}\n          message=\"情绪已归于宇宙，未来将更加闪耀\"\n        />\n      )}\n    </PositionWrapper>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}