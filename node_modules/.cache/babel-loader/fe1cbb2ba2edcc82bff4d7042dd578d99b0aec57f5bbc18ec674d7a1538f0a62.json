{"ast":null,"code":"/*\n * Copyright 2014 Takuya Asano\n * Copyright 2010-2014 Atilika Inc. and contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\"use strict\";\n\n/**\n * String wrapper for UTF-16 surrogate pair (4 bytes)\n * @param {string} str String to wrap\n * @constructor\n */\nfunction SurrogateAwareString(str) {\n  this.str = str;\n  this.index_mapping = [];\n  for (var pos = 0; pos < str.length; pos++) {\n    var ch = str.charAt(pos);\n    this.index_mapping.push(pos);\n    if (SurrogateAwareString.isSurrogatePair(ch)) {\n      pos++;\n    }\n  }\n  // Surrogate aware length\n  this.length = this.index_mapping.length;\n}\nSurrogateAwareString.prototype.slice = function (index) {\n  if (this.index_mapping.length <= index) {\n    return \"\";\n  }\n  var surrogate_aware_index = this.index_mapping[index];\n  return this.str.slice(surrogate_aware_index);\n};\nSurrogateAwareString.prototype.charAt = function (index) {\n  if (this.str.length <= index) {\n    return \"\";\n  }\n  var surrogate_aware_start_index = this.index_mapping[index];\n  var surrogate_aware_end_index = this.index_mapping[index + 1];\n  if (surrogate_aware_end_index == null) {\n    return this.str.slice(surrogate_aware_start_index);\n  }\n  return this.str.slice(surrogate_aware_start_index, surrogate_aware_end_index);\n};\nSurrogateAwareString.prototype.charCodeAt = function (index) {\n  if (this.index_mapping.length <= index) {\n    return NaN;\n  }\n  var surrogate_aware_index = this.index_mapping[index];\n  var upper = this.str.charCodeAt(surrogate_aware_index);\n  var lower;\n  if (upper >= 0xD800 && upper <= 0xDBFF && surrogate_aware_index < this.str.length) {\n    lower = this.str.charCodeAt(surrogate_aware_index + 1);\n    if (lower >= 0xDC00 && lower <= 0xDFFF) {\n      return (upper - 0xD800) * 0x400 + lower - 0xDC00 + 0x10000;\n    }\n  }\n  return upper;\n};\nSurrogateAwareString.prototype.toString = function () {\n  return this.str;\n};\nSurrogateAwareString.isSurrogatePair = function (ch) {\n  var utf16_code = ch.charCodeAt(0);\n  if (utf16_code >= 0xD800 && utf16_code <= 0xDBFF) {\n    // surrogate pair\n    return true;\n  } else {\n    return false;\n  }\n};\nmodule.exports = SurrogateAwareString;","map":{"version":3,"names":["SurrogateAwareString","str","index_mapping","pos","length","ch","charAt","push","isSurrogatePair","prototype","slice","index","surrogate_aware_index","surrogate_aware_start_index","surrogate_aware_end_index","charCodeAt","NaN","upper","lower","toString","utf16_code","module","exports"],"sources":["/Users/zyq/Desktop/大二下/暑期实习/moonshot project/node_modules/kuromoji/src/util/SurrogateAwareString.js"],"sourcesContent":["/*\n * Copyright 2014 Takuya Asano\n * Copyright 2010-2014 Atilika Inc. and contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\"use strict\";\n\n/**\n * String wrapper for UTF-16 surrogate pair (4 bytes)\n * @param {string} str String to wrap\n * @constructor\n */\nfunction SurrogateAwareString(str) {\n    this.str = str;\n    this.index_mapping = [];\n\n    for (var pos = 0; pos < str.length; pos++) {\n        var ch = str.charAt(pos);\n        this.index_mapping.push(pos);\n        if (SurrogateAwareString.isSurrogatePair(ch)) {\n            pos++;\n        }\n    }\n    // Surrogate aware length\n    this.length = this.index_mapping.length;\n}\n\nSurrogateAwareString.prototype.slice = function (index) {\n    if (this.index_mapping.length <= index) {\n        return \"\";\n    }\n    var surrogate_aware_index = this.index_mapping[index];\n    return this.str.slice(surrogate_aware_index);\n};\n\nSurrogateAwareString.prototype.charAt = function (index) {\n    if (this.str.length <= index) {\n        return \"\";\n    }\n    var surrogate_aware_start_index = this.index_mapping[index];\n    var surrogate_aware_end_index = this.index_mapping[index + 1];\n\n    if (surrogate_aware_end_index == null) {\n        return this.str.slice(surrogate_aware_start_index);\n    }\n    return this.str.slice(surrogate_aware_start_index, surrogate_aware_end_index);\n};\n\nSurrogateAwareString.prototype.charCodeAt = function (index) {\n    if (this.index_mapping.length <= index) {\n        return NaN;\n    }\n    var surrogate_aware_index = this.index_mapping[index];\n    var upper = this.str.charCodeAt(surrogate_aware_index);\n    var lower;\n    if (upper >= 0xD800 && upper <= 0xDBFF && surrogate_aware_index < this.str.length) {\n        lower = this.str.charCodeAt(surrogate_aware_index + 1);\n        if (lower >= 0xDC00 && lower <= 0xDFFF) {\n            return (upper - 0xD800) * 0x400 + lower - 0xDC00 + 0x10000;\n        }\n    }\n    return upper;\n};\n\nSurrogateAwareString.prototype.toString = function () {\n    return this.str;\n};\n\nSurrogateAwareString.isSurrogatePair = function (ch) {\n    var utf16_code = ch.charCodeAt(0);\n    if (utf16_code >= 0xD800 && utf16_code <= 0xDBFF) {\n        // surrogate pair\n        return true;\n    } else {\n        return false;\n    }\n};\n\nmodule.exports = SurrogateAwareString;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}